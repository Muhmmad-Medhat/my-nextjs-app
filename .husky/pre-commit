#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo 'ğŸ—ï¸ğŸ‘· Styling, testing and building your project before committing ğŸ”âœ¨'

# Check Prettier standards (ignoring build directories)
npx prettier --check . --ignore-path .gitignore ||
(
	echo 'ğŸ’…âŒ Whoops! Your code needs a beauty makeover ğŸ’„
		ğŸ’¥ Prettier check failed! Run: `npm run format`, clean it up, and try again! You got this ğŸ’ª';
	false;
)

# Check ESLint Standards (using flat config)
npx eslint . ||
(
	echo 'ğŸ§¹ğŸš« Uh-oh, some lint just tripped you up! ğŸ˜¬
		ğŸ§  Fix the issues above, clean up your act, and take another shot! ğŸ¯';
    false;
)

# Check tsconfig standards
npm run check-types ||
(
    echo 'ğŸ”ğŸ¤“ Type check failed!
    ğŸ§© Looks like some types are playing hide-and-seek ğŸ˜…
    ğŸ¯ Letâ€™s fix â€™em and make TypeScript proud!';
    false;
)

# Try to build
echo 'ğŸ—ï¸ğŸ§  Checking if everything is ready to launch... Hold tight! ğŸš€'

npm run build ||
(
    echo 'ğŸ›‘ğŸšï¸ Yikes! The build collapsed like a Jenga tower!
    ğŸ”§ Check those errors, fix it up, and weâ€™ll be back on track!';
    false;
)

# All checks passed
echo 'ğŸ‰ğŸ‰ Everything looks *awesome*! ğŸš€ Time to commit this masterpiece ğŸ¨âœ…'
